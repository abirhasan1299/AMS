<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Current Cases - Advocate & Criminology Management System - আইনপ্রহরী</title>

    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        :root {
            --primary-blue: #1a202c; /* blue-900 equivalent */
            --secondary-blue: #2c5282; /* blue-700 equivalent */
            --accent-blue: #3182ce; /* blue-600 equivalent */
            --light-blue: #ebf8ff; /* blue-50 equivalent */
            --lighter-blue: #e0f2fe; /* blue-100 equivalent */
            --text-dark: #2d3748; /* gray-800 equivalent */
            --text-medium: #4a5568; /* gray-700 equivalent */
            --text-light: #718096; /* gray-600 equivalent */
            --bg-light: #f7fafc; /* gray-50 equivalent */
            --bg-white: #ffffff;
            --bg-dark: #1a202c; /* gray-900 equivalent */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            padding-top: 76px; /* Adjust based on navbar height */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .navbar {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }

        .navbar-brand {
            color: var(--primary-blue) !important;
            font-weight: 800;
            font-size: 1.75rem;
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            transition: background-color 0.3s ease;
        }
        .navbar-brand:hover {
            background-color: var(--light-blue);
        }

        .nav-link {
            color: var(--text-light) !important;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: var(--accent-blue) !important;
        }

        .btn-primary-custom {
            background-color: var(--accent-blue);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        .btn-primary-custom:hover {
            background-color: #2b6cb0;
            transform: translateY(-2px);
            color: white;
        }

        .btn-secondary-outline-custom {
            background-color: transparent;
            color: var(--text-medium);
            border: 1px solid var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        .btn-secondary-outline-custom:hover {
            background-color: var(--light-blue);
            color: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .page-container {
            padding: 3rem 0;
            background-color: var(--bg-light);
        }

        .content-card {
            background-color: var(--bg-white);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #f0f0f0;
            margin-bottom: 2rem;
        }

        .section-header {
            color: var(--primary-blue);
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        .table {
            min-width: 900px; /* Ensure table doesn't shrink too much on smaller screens */
        }

        .table thead th {
            background-color: var(--lighter-blue);
            color: var(--primary-blue);
            font-weight: 600;
            border-bottom: 2px solid var(--accent-blue);
            padding: 1rem 0.75rem;
        }

        .table tbody tr {
            transition: background-color 0.2s ease;
        }
        .table tbody tr:hover {
            background-color: var(--light-blue);
        }

        .table tbody td {
            vertical-align: middle;
            padding: 0.75rem;
            border-top: 1px solid #e2e8f0;
        }

        .text-primary-custom {
            color: var(--accent-blue) !important;
        }

        .bg-gray-900-custom {
            background-color: var(--bg-dark);
        }

        /* Footer specific styling */
        footer a {
            transition: color 0.3s ease;
        }
        footer a:hover {
            color: white !important;
        }

        /* Search and Filter styling */
        .filter-section {
            background-color: var(--bg-white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #f0f0f0;
            margin-bottom: 2rem;
        }
        .filter-section .form-control,
        .filter-section .form-select {
            border-radius: 0.5rem;
            border-color: #cbd5e0; /* gray-300 */
        }
        .filter-section .btn {
            border-radius: 0.5rem;
        }
    </style>
</head>
<body>

    <!-- Navigation Bar (Copied from advocate-dashboard.html for consistency) -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top py-3">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <i data-lucide="gavel" class="me-2 text-primary-custom-icon"></i>
                <span id="app-name">আইনপ্রহরী</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                     <li class="nav-item">
                        <button class="btn btn-outline-secondary d-flex align-items-center" id="back-to-dashboard">
                            <i data-lucide="arrow-left" class="me-2"></i> <span id="back-button-text">ড্যাশবোর্ডে ফিরে যান</span>
                        </button>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="feature.html" id="nav-features">বৈশিষ্ট্যসমূহ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="roles.html" id="nav-roles">ভূমিকা</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html" id="nav-contact">যোগাযোগ</a>
                    </li>
                    <li class="nav-item ms-lg-3">
                        <a class="btn btn-outline-primary d-flex align-items-center" href="advocate_profile.html" id="nav-profile">
                            <i data-lucide="user" class="me-2"></i> <span id="user-display-name">ব্যবহারকারী</span>
                        </a>
                    </li>
                    <li class="nav-item ms-lg-3">
                        <a class="btn btn-primary-custom d-flex align-items-center" href="index.html" id="nav-logout">
                            <i data-lucide="log-out" class="me-2"></i> লগআউট
                        </a>
                    </li>
                    <li class="nav-item ms-lg-4">
                        <button class="btn btn-secondary-outline-custom" id="language-toggle">English</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Current Cases Content Section -->
    <section class="page-container">
        <div class="container">
            <div class="content-card text-center">
                <h1 class="display-5 fw-bold mb-3" id="page-heading">চলমান কেসসমূহ</h1>
                <p class="lead text-muted" id="page-tagline">আপনার সক্রিয় আইনি মামলা এবং তাদের আর্থিক অবস্থা ট্র্যাক করুন।</p>
            </div>

            <!-- Search and Filter Section -->
            <div class="filter-section">
                <h3 class="section-header mb-4" id="filter-heading">কেস অনুসন্ধান ও ফিল্টার করুন</h3>
                <div class="row g-3 align-items-end">
                    <div class="col-md-4">
                        <label for="caseSearch" class="form-label" id="search-label">কেস আইডি বা ক্লায়েন্টের নাম</label>
                        <input type="text" class="form-control" id="caseSearch" placeholder="অনুসন্ধান করুন...">
                    </div>
                    <div class="col-md-3">
                        <label for="caseStatusFilter" class="form-label" id="status-filter-label">কেস স্থিতি</label>
                        <select class="form-select" id="caseStatusFilter">
                            <option value="" id="status-option-all">সকল</option>
                            <option value="Active" id="status-option-active">সক্রিয়</option>
                            <option value="Hearing Scheduled" id="status-option-hearing">শুনানি নির্ধারিত</option>
                            <option value="Negotiation" id="status-option-negotiation">আলোচনাধীন</option>
                            <option value="Pending Filing" id="status-option-pending">জমা দেওয়ার অপেক্ষায়</option>
                            <option value="Closed" id="status-option-closed">বন্ধ</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="paymentStatusFilter" class="form-label" id="payment-filter-label">পেমেন্ট স্থিতি</label>
                        <select class="form-select" id="paymentStatusFilter">
                            <option value="" id="payment-option-all">সকল</option>
                            <option value="Paid in Full" id="payment-option-paid">সম্পূর্ণ পরিশোধিত</option>
                            <option value="Outstanding" id="payment-option-outstanding">বকেয়া</option>
                            <option value="Partially Paid" id="payment-option-partial">আংশিক পরিশোধিত</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-primary-custom w-100" id="apply-filter-btn">ফিল্টার প্রয়োগ করুন</button>
                    </div>
                </div>
            </div>

            <!-- Current Cases Table -->
            <div class="content-card">
                <h3 class="section-header" id="cases-table-heading">আপনার চলমান কেস তালিকা</h3>
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead>
                            <tr>
                                <th scope="col" id="col-case-id">কেস আইডি</th>
                                <th scope="col" id="col-case-name">কেসের নাম</th>
                                <th scope="col" id="col-client-name">ক্লায়েন্টের নাম</th>
                                <th scope="col" id="col-case-status">স্থিতি</th>
                                <th scope="col" id="col-next-date">পরবর্তী তারিখ</th>
                                <th scope="col" id="col-billed-amount">মোট বিল</th>
                                <th scope="col" id="col-paid-amount">পরিশোধিত</th>
                                <th scope="col" id="col-outstanding">বকেয়া</th>
                                <th scope="col" id="col-last-payment">শেষ পেমেন্ট</th>
                                <th scope="col" id="col-actions">ক্রিয়াকলাপ</th>
                            </tr>
                        </thead>
                        <tbody id="cases-table-body">
                            <!-- Dummy Data - This will be dynamically rendered by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer (Copied from advocate-dashboard.html for consistency) -->
    <footer class="bg-gray-900-custom text-light py-4">
        <div class="container text-center text-md-start d-md-flex justify-content-between align-items-center">
            <div class="mb-3 mb-md-0">
                <p class="mb-0" id="footer-copyright">&copy; <span id="current-year"></span> আইনপ্রহরী. সর্বস্বত্ব সংরক্ষিত।</p>
            </div>
            <div class="d-flex justify-content-center gap-4">
                <a href="#" class="text-light text-decoration-none hover-white" id="footer-privacy">গোপনীয়তা নীতি</a>
                <a href="#" class="text-light text-decoration-none hover-white" id="footer-terms">পরিষেবার শর্তাবলী</a>
                <a href="#" class="text-light text-decoration-none hover-white" id="footer-sitemap">সাইটম্যাপ</a>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS CDN (Bundle with Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <!-- Custom JavaScript for Language Switching and basic table filtering -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Lucide icons
            lucide.createIcons();

            // Content object for both English and Bengali
            const content = {
                en: {
                    appName: "AdvocatePro",
                    nav: {
                        backButton: "Back to Dashboard",
                        features: "Features",
                        roles: "Roles",
                        contact: "Contact",
                        profile: "Profile",
                        logout: "Logout",
                    },
                    page: {
                        heading: "Current Cases",
                        tagline: "Track your active legal matters and their financial status.",
                        filterHeading: "Search & Filter Cases",
                        searchLabel: "Case ID or Client Name",
                        statusFilterLabel: "Case Status",
                        statusOptionAll: "All",
                        statusOptionActive: "Active",
                        statusOptionHearing: "Hearing Scheduled",
                        statusOptionNegotiation: "Negotiation",
                        statusOptionPending: "Pending Filing",
                        statusOptionClosed: "Closed",
                        paymentFilterLabel: "Payment Status",
                        paymentOptionAll: "All",
                        paymentOptionPaid: "Paid in Full",
                        paymentOptionOutstanding: "Outstanding",
                        paymentOptionPartial: "Partially Paid",
                        applyFilterBtn: "Apply Filter",
                        casesTableHeading: "Your Current Case List",
                        colCaseId: "Case ID",
                        colCaseName: "Case Name",
                        colClientName: "Client Name",
                        colCaseStatus: "Status",
                        colNextDate: "Next Date",
                        colBilledAmount: "Total Billed",
                        colPaidAmount: "Paid",
                        colOutstanding: "Outstanding",
                        colLastPayment: "Last Payment",
                        colActions: "Actions",
                        btnViewDetails: "View Details",
                        btnAddPayment: "Add Payment",
                    },
                    footer: {
                        copyright: "Ainprohori. All rights reserved.",
                        privacyPolicy: "Privacy Policy",
                        termsOfService: "Terms of Service",
                        sitemap: "Sitemap",
                    },
                },
                bn: {
                    appName: "আইনপ্রহরী",
                    nav: {
                        backButton: "ড্যাশবোর্ডে ফিরে যান",
                        features: "বৈশিষ্ট্যসমূহ",
                        roles: "ভূমিকা",
                        contact: "যোগাযোগ",
                        profile: "প্রোফাইল",
                        logout: "লগআউট",
                    },
                    page: {
                        heading: "চলমান কেসসমূহ",
                        tagline: "আপনার সক্রিয় আইনি মামলা এবং তাদের আর্থিক অবস্থা ট্র্যাক করুন।",
                        filterHeading: "কেস অনুসন্ধান ও ফিল্টার করুন",
                        searchLabel: "কেস আইডি বা ক্লায়েন্টের নাম",
                        statusFilterLabel: "কেস স্থিতি",
                        statusOptionAll: "সকল",
                        statusOptionActive: "সক্রিয়",
                        statusOptionHearing: "শুনানি নির্ধারিত",
                        statusOptionNegotiation: "আলোচনাধীন",
                        statusOptionPending: "জমা দেওয়ার অপেক্ষায়",
                        statusOptionClosed: "বন্ধ",
                        paymentFilterLabel: "পেমেন্ট স্থিতি",
                        paymentOptionAll: "সকল",
                        paymentOptionPaid: "সম্পূর্ণ পরিশোধিত",
                        paymentOptionOutstanding: "বকেয়া",
                        paymentOptionPartial: "আংশিক পরিশোধিত",
                        applyFilterBtn: "ফিল্টার প্রয়োগ করুন",
                        casesTableHeading: "আপনার চলমান কেস তালিকা",
                        colCaseId: "কেস আইডি",
                        colCaseName: "কেসের নাম",
                        colClientName: "ক্লায়েন্টের নাম",
                        colCaseStatus: "স্থিতি",
                        colNextDate: "পরবর্তী তারিখ",
                        colBilledAmount: "মোট বিল",
                        colPaidAmount: "পরিশোধিত",
                        colOutstanding: "বকেয়া",
                        colLastPayment: "শেষ পেমেন্ট",
                        colActions: "ক্রিয়াকলাপ",
                        btnViewDetails: "বিস্তারিত দেখুন",
                        btnAddPayment: "পেমেন্ট যোগ করুন",
                    },
                    footer: {
                        copyright: "আইনপ্রহরী. সর্বস্বত্ব সংরক্ষিত।",
                        privacyPolicy: "গোপনীয়তা নীতি",
                        termsOfService: "পরিষেবার শর্তাবলী",
                        sitemap: "সাইটম্যাপ",
                    },
                },
            };

           let currentLang = 'en'; // Initial language

            // Get elements that will be updated
            const elementsToUpdate = {
                appName: document.getElementById('app-name'),
                backButtonText: document.getElementById('back-button-text'),
                navFeatures: document.getElementById('nav-features'),
                navRoles: document.getElementById('nav-roles'),
                navContact: document.getElementById('nav-contact'),
                navProfile: document.getElementById('nav-profile'),
                userDisplayName: document.getElementById('user-display-name'),
                navLogout: document.getElementById('nav-logout'),
                languageToggle: document.getElementById('language-toggle'),

                pageHeading: document.getElementById('page-heading'),
                pageTagline: document.getElementById('page-tagline'),
                filterHeading: document.getElementById('filter-heading'),
                searchLabel: document.getElementById('search-label'),
                caseSearch: document.getElementById('caseSearch'),
                statusFilterLabel: document.getElementById('status-filter-label'),
                statusOptionAll: document.getElementById('status-option-all'),
                statusOptionActive: document.getElementById('status-option-active'),
                statusOptionHearing: document.getElementById('status-option-hearing'),
                statusOptionNegotiation: document.getElementById('status-option-negotiation'),
                statusOptionPending: document.getElementById('status-option-pending'),
                statusOptionClosed: document.getElementById('status-option-closed'),
                paymentFilterLabel: document.getElementById('payment-filter-label'),
                paymentOptionAll: document.getElementById('payment-option-all'),
                paymentOptionPaid: document.getElementById('payment-option-paid'),
                paymentOptionOutstanding: document.getElementById('payment-option-outstanding'),
                paymentOptionPartial: document.getElementById('payment-option-partial'),
                applyFilterBtn: document.getElementById('apply-filter-btn'),
                casesTableHeading: document.getElementById('cases-table-heading'),
                colCaseId: document.getElementById('col-case-id'),
                colCaseName: document.getElementById('col-case-name'),
                colClientName: document.getElementById('col-client-name'),
                colCaseStatus: document.getElementById('col-case-status'),
                colNextDate: document.getElementById('col-next-date'),
                colBilledAmount: document.getElementById('col-billed-amount'),
                colPaidAmount: document.getElementById('col-paid-amount'),
                colOutstanding: document.getElementById('col-outstanding'),
                colLastPayment: document.getElementById('col-last-payment'),
                colActions: document.getElementById('col-actions'),

                footerCopyright: document.getElementById('footer-copyright'),
                currentYear: document.getElementById('current-year'),
                footerPrivacy: document.getElementById('footer-privacy'),
                footerTerms: document.getElementById('footer-terms'),
                footerSitemap: document.getElementById('footer-sitemap'),
            };

            // Dummy data for cases (for filtering demonstration)
            // Storing English keys for status, and both English/Bengali for names
            const allCases = [
                {
                    id: "CR2025-001",
                    name_en: "John vs. State",
                    name_bn: "জন বনাম রাজ্য",
                    client_en: "Mr. John Smith",
                    client_bn: "জনাব জন স্মিথ",
                    status: "Hearing Scheduled", // Use English key
                    nextDate: "2025-07-20",
                    billed: "৳ 50,000",
                    paid: "৳ 30,000",
                    outstanding: "৳ 20,000",
                    lastPayment: "2025-07-10",
                    paymentStatus: "Partially Paid"
                },
                {
                    id: "CIV2025-005",
                    name_en: "Smith vs. Jones",
                    name_bn: "স্মিথ বনাম জোন্স",
                    client_en: "Mrs. Sara Smith",
                    client_bn: "মিসেস সারা স্মিথ",
                    status: "Negotiation", // Use English key
                    nextDate: "2025-07-25",
                    billed: "৳ 75,000",
                    paid: "৳ 75,000",
                    outstanding: "৳ 0",
                    lastPayment: "2025-07-05",
                    paymentStatus: "Paid in Full"
                },
                {
                    id: "FAM2025-010",
                    name_en: "Divorce Case",
                    name_bn: "ডিভোর্স কেস",
                    client_en: "Mr. Rana Ahmed",
                    client_bn: "জনাব রানা আহমেদ",
                    status: "Active", // Use English key
                    nextDate: "2025-08-01",
                    billed: "৳ 40,000",
                    paid: "৳ 20,000",
                    outstanding: "৳ 20,000",
                    lastPayment: "2025-06-28",
                    paymentStatus: "Partially Paid"
                },
                {
                    id: "CR2025-002",
                    name_en: "State vs. Khan",
                    name_bn: "রাজ্য বনাম খান",
                    client_en: "Mr. Ali Khan",
                    client_bn: "জনাব আলী খান",
                    status: "Pending Filing", // Use English key
                    nextDate: "2025-07-28",
                    billed: "৳ 60,000",
                    paid: "৳ 0",
                    outstanding: "৳ 60,000",
                    lastPayment: "N/A",
                    paymentStatus: "Outstanding"
                },
                {
                    id: "PROP2025-003",
                    name_en: "Property Dispute",
                    name_bn: "সম্পত্তি বিরোধ",
                    client_en: "Mrs. Fatema Begum",
                    client_bn: "মিসেস ফাতেমা বেগম",
                    status: "Active", // Use English key
                    nextDate: "2025-08-15",
                    billed: "৳ 80,000",
                    paid: "৳ 80,000",
                    outstanding: "৳ 0",
                    lastPayment: "2025-07-01",
                    paymentStatus: "Paid in Full"
                }
            ];

            // Helper function to get translated status string
            function getStatusTranslated(statusKey) {
                const t = content[currentLang].page;
                switch (statusKey) {
                    case "Active": return t.statusOptionActive;
                    case "Hearing Scheduled": return t.statusOptionHearing;
                    case "Negotiation": return t.statusOptionNegotiation;
                    case "Pending Filing": return t.statusOptionPending;
                    case "Closed": return t.statusOptionClosed;
                    default: return statusKey; // Fallback to key if no translation found
                }
            }

            function renderCases(casesToRender) {
                const tbody = document.getElementById('cases-table-body');
                tbody.innerHTML = ''; // Clear existing rows
                const t = content[currentLang].page;

                casesToRender.forEach((caseItem, index) => {
                    const translatedStatus = getStatusTranslated(caseItem.status); // Get translated status
                    const translatedCaseName = caseItem['name_' + currentLang]; // Get translated case name
                    const translatedClientName = caseItem['client_' + currentLang]; // Get translated client name

                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td><span class="fw-bold text-primary-custom">${caseItem.id}</span></td>
                        <td>${translatedCaseName}</td>
                        <td>${translatedClientName}</td>
                        <td><span class="badge ${getBadgeClass(caseItem.status)}">${translatedStatus}</span></td>
                        <td>${caseItem.nextDate}</td>
                        <td>${caseItem.billed}</td>
                        <td>${caseItem.paid}</td>
                        <td>${caseItem.outstanding}</td>
                        <td>${caseItem.lastPayment}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1" title="${t.btnViewDetails}" id="btn-view-${index + 1}">
                                <i data-lucide="eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" title="${t.btnAddPayment}" id="btn-add-payment-${index + 1}">
                                <i data-lucide="wallet"></i>
                            </button>
                        </td>
                    `;
                });
                lucide.createIcons(); // Re-create Lucide icons for new rows
            }

            // Helper function to get badge class based on English status key
            function getBadgeClass(statusKey) {
                switch (statusKey) {
                    case "Active": return "bg-success";
                    case "Hearing Scheduled": return "bg-warning text-dark";
                    case "Negotiation": return "bg-info";
                    case "Pending Filing": return "bg-danger";
                    case "Closed": return "bg-secondary";
                    default: return "bg-secondary";
                }
            }

            function updateContent() {
                const t = content[currentLang];

                // Navbar
                if (elementsToUpdate.appName) elementsToUpdate.appName.textContent = t.appName;
                if (elementsToUpdate.backButtonText) elementsToUpdate.backButtonText.textContent = t.nav.backButton;
                if (elementsToUpdate.navFeatures) elementsToUpdate.navFeatures.textContent = t.nav.features;
                if (elementsToUpdate.navRoles) elementsToUpdate.navRoles.textContent = t.nav.roles;
                if (elementsToUpdate.navContact) elementsToUpdate.navContact.textContent = t.nav.contact;
                if (elementsToUpdate.navProfile) elementsToUpdate.navProfile.innerHTML = `<i data-lucide="user" class="me-2"></i> <span id="user-display-name">${t.nav.profile}</span>`;
                if (elementsToUpdate.navLogout) elementsToUpdate.navLogout.innerHTML = `<i data-lucide="log-out" class="me-2"></i> ${t.nav.logout}`;
                if (elementsToUpdate.languageToggle) elementsToUpdate.languageToggle.textContent = currentLang === 'en' ? 'বাংলা' : 'English';

                // Page Content
                if (elementsToUpdate.pageHeading) elementsToUpdate.pageHeading.textContent = t.page.heading;
                if (elementsToUpdate.pageTagline) elementsToUpdate.pageTagline.textContent = t.page.tagline;
                if (elementsToUpdate.filterHeading) elementsToUpdate.filterHeading.textContent = t.page.filterHeading;
                if (elementsToUpdate.searchLabel) elementsToUpdate.searchLabel.textContent = t.page.searchLabel;
                if (elementsToUpdate.caseSearch) elementsToUpdate.caseSearch.placeholder = t.page.searchLabel; // Update placeholder
                if (elementsToUpdate.statusFilterLabel) elementsToUpdate.statusFilterLabel.textContent = t.page.statusFilterLabel;
                if (elementsToUpdate.statusOptionAll) elementsToUpdate.statusOptionAll.textContent = t.page.statusOptionAll;
                if (elementsToUpdate.statusOptionActive) elementsToUpdate.statusOptionActive.textContent = t.page.statusOptionActive;
                if (elementsToUpdate.statusOptionHearing) elementsToUpdate.statusOptionHearing.textContent = t.page.statusOptionHearing;
                if (elementsToUpdate.statusOptionNegotiation) elementsToUpdate.statusOptionNegotiation.textContent = t.page.statusOptionNegotiation;
                if (elementsToUpdate.statusOptionPending) elementsToUpdate.statusOptionPending.textContent = t.page.statusOptionPending;
                if (elementsToUpdate.statusOptionClosed) elementsToUpdate.statusOptionClosed.textContent = t.page.statusOptionClosed;
                if (elementsToUpdate.paymentFilterLabel) elementsToUpdate.paymentFilterLabel.textContent = t.page.paymentFilterLabel;
                if (elementsToUpdate.paymentOptionAll) elementsToUpdate.paymentOptionAll.textContent = t.page.paymentOptionAll;
                if (elementsToUpdate.paymentOptionPaid) elementsToUpdate.paymentOptionPaid.textContent = t.page.paymentOptionPaid;
                if (elementsToUpdate.paymentOptionOutstanding) elementsToUpdate.paymentOptionOutstanding.textContent = t.page.paymentOptionOutstanding;
                if (elementsToUpdate.paymentOptionPartial) elementsToUpdate.paymentOptionPartial.textContent = t.page.paymentOptionPartial;
                if (elementsToUpdate.applyFilterBtn) elementsToUpdate.applyFilterBtn.textContent = t.page.applyFilterBtn;
                if (elementsToUpdate.casesTableHeading) elementsToUpdate.casesTableHeading.textContent = t.page.casesTableHeading;
                if (elementsToUpdate.colCaseId) elementsToUpdate.colCaseId.textContent = t.page.colCaseId;
                if (elementsToUpdate.colCaseName) elementsToUpdate.colCaseName.textContent = t.page.colCaseName;
                if (elementsToUpdate.colClientName) elementsToUpdate.colClientName.textContent = t.page.colClientName;
                if (elementsToUpdate.colCaseStatus) elementsToUpdate.colCaseStatus.textContent = t.page.colCaseStatus;
                if (elementsToUpdate.colNextDate) elementsToUpdate.colNextDate.textContent = t.page.colNextDate;
                if (elementsToUpdate.colBilledAmount) elementsToUpdate.colBilledAmount.textContent = t.page.colBilledAmount;
                if (elementsToUpdate.colPaidAmount) elementsToUpdate.colPaidAmount.textContent = t.page.colPaidAmount;
                if (elementsToUpdate.colOutstanding) elementsToUpdate.colOutstanding.textContent = t.page.colOutstanding;
                if (elementsToUpdate.colLastPayment) elementsToUpdate.colLastPayment.textContent = t.page.colLastPayment;
                if (elementsToUpdate.colActions) elementsToUpdate.colActions.textContent = t.page.colActions;

                // Footer
                if (elementsToUpdate.currentYear) elementsToUpdate.currentYear.textContent = new Date().getFullYear();
                if (elementsToUpdate.footerCopyright) elementsToUpdate.footerCopyright.textContent = `© ${new Date().getFullYear()} ${t.footer.copyright}`;
                if (elementsToUpdate.footerPrivacy) elementsToUpdate.footerPrivacy.textContent = t.footer.privacyPolicy;
                if (elementsToUpdate.footerTerms) elementsToUpdate.footerTerms.textContent = t.footer.termsOfService;
                if (elementsToUpdate.footerSitemap) elementsToUpdate.footerSitemap.textContent = t.footer.sitemap;

                // Re-render cases with updated language
                applyFilters(); // This will re-render the table with current language's status/payment names
                lucide.createIcons();
            }
                  document.getElementById('back-to-dashboard').addEventListener('click', () => {
                history.back();
            });

            // Event listener for language toggle button
            if (elementsToUpdate.languageToggle) {
                elementsToUpdate.languageToggle.addEventListener('click', () => {
                    currentLang = currentLang === 'en' ? 'bn' : 'en';
                    document.documentElement.lang = currentLang; // Update html lang attribute
                    updateContent();
                    setUserIdAndName(); // Ensure user ID/name is also updated if it's dynamic
                });
            }

            // Placeholder for User ID and Name (in a real app, this would come from authentication)
            function setUserIdAndName() {
                const dummyUserId = "ADV-9876543210FEDCBA"; // Example dummy ID for Advocate
                const dummyUserName = currentLang === 'bn' ? "অ্যাডভোকেট জাহিদ হাসান" : "Advocate Jahid Hasan"; // Example dummy name (Bengali/English)

                if (document.getElementById('user-id-value')) { // Check if element exists before setting
                    document.getElementById('user-id-value').textContent = dummyUserId;
                }
                if (elementsToUpdate.userDisplayName) {
                    elementsToUpdate.userDisplayName.textContent = dummyUserName;
                }
            }

            // Basic Filtering Logic
            function applyFilters() {
                // Safely access values, defaulting to empty string if element is not found
                const searchTerm = elementsToUpdate.caseSearch?.value?.toLowerCase() || '';
                const statusFilter = elementsToUpdate.caseStatusFilter?.value || '';
                const paymentFilter = elementsToUpdate.paymentStatusFilter?.value || '';

                const filteredCases = allCases.filter(caseItem => {
                    // Search across both English and Bengali names
                    const matchesSearch = caseItem.id.toLowerCase().includes(searchTerm) ||
                                          caseItem.client_en.toLowerCase().includes(searchTerm) ||
                                          caseItem.client_bn.toLowerCase().includes(searchTerm) ||
                                          caseItem.name_en.toLowerCase().includes(searchTerm) ||
                                          caseItem.name_bn.toLowerCase().includes(searchTerm);

                    // Status matching: compare directly with the English key from the dropdown
                    const matchesStatus = statusFilter === "" || caseItem.status === statusFilter;

                    const matchesPayment = paymentFilter === "" || caseItem.paymentStatus === paymentFilter;

                    return matchesSearch && matchesStatus && matchesPayment;
                });
                renderCases(filteredCases);
            }

            // Event listeners for filters
            if (elementsToUpdate.applyFilterBtn) {
                elementsToUpdate.applyFilterBtn.addEventListener('click', applyFilters);
            }
            if (elementsToUpdate.caseSearch) {
                elementsToUpdate.caseSearch.addEventListener('keyup', applyFilters);
            }
            if (elementsToUpdate.caseStatusFilter) {
                elementsToUpdate.caseStatusFilter.addEventListener('change', applyFilters);
            }
            if (elementsToUpdate.paymentStatusFilter) {
                elementsToUpdate.paymentStatusFilter.addEventListener('change', applyFilters);
            }

            // Initial content load and set dummy user data
            updateContent();
            setUserIdAndName();
        });
    </script>
</body>
</html>
